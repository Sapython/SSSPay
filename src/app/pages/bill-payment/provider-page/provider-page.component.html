<app-header [backButton]="true" pageName="Bill Payment" [isModal]="true"></app-header>

<div>
  <form [formGroup]="billProviderForm" (ngSubmit)="getBill()" *ngIf="!billFetched">
    <ion-item>
      <ion-label position="floating">{{operator.displayname}}</ion-label>
      <ion-input [placeholder]="operator.displayname" formControlName="mainField"></ion-input>
    </ion-item>
    <ion-item *ngFor="let field of fields">
      <ion-label position="floating">{{field.name}}</ion-label>
      <ion-input [placeholder]="field.name" [formControl]="field.control"></ion-input>
    </ion-item>
    <ion-button type="submit" expand="block" fill="clear" shape="round">
      Check Bill
    </ion-button>
  </form>
  <form *ngIf="billFetched">
    <ion-text color="primary">
      <h3>Bill</h3>
    </ion-text>
    <ion-item>
      <ion-label>Amount</ion-label>
      <ion-label>{{bill.amount}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>Name</ion-label>
      <ion-label>{{bill.name}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>Due Date</ion-label>
      <ion-label>{{bill.duedate}}</ion-label>
    </ion-item>
    <ion-button (click)="payBill()" expand="block" fill="solid" shape="round">
      Pay Bill
    </ion-button>
  </form>
</div>